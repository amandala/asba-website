!function(a,b,c,d,e,f,g){a.extend(tribe_ev.fn,{set_form:function(b){var c=!1,e=a("body"),f=a("#tribe_events_filters_form"),g=a("#tribe-bar-form");e.addClass("tribe-reset-on"),f.length&&(f.tribe_clear_form(),f.find(".ui-slider").length&&(c=!0,a("#tribe_events_filters_form .ui-slider").each(function(){var b=a(this).attr("id"),c=a("#"+b),d=c.prev(),e=d.prev(),f=c.slider("option");c.slider("values",0,f.min),c.slider("values",1,f.max),e.text(f.min+" - "+f.max),d.val("")}))),g.length&&g.tribe_clear_form(),b=d.parse_string(b),a.each(b,function(b,c){if("action"!==b){var d=decodeURI(b),e="";if(1===c.length)a('[name="'+d+'"]').is('input[type="text"], input[type="hidden"]')?a('[name="'+d+'"]').val(c):a('[name="'+d+'"][value="'+c+'"]').is(":checkbox, :radio")?a('[name="'+d+'"][value="'+c+'"]').prop("checked",!0):a('[name="'+d+'"]').is("select")&&a('select[name="'+d+'"] option[value="'+c+'"]').attr("selected",!0);else for(var f=0;f<c.length;f++)e=a('[name="'+d+'"][value="'+c[f]+'"]'),e.is(":checkbox, :radio")?e.prop("checked",!0):a('select[name="'+d+'"] option[value="'+c[f]+'"]').attr("selected",!0)}}),c&&a("#tribe_events_filters_form .ui-slider").each(function(){var b=a(this).attr("id"),c=a("#"+b),d=c.prev(),e=d.val().split("-");if(""!==e[0]){var f=d.prev();c.slider("values",0,e[0]),c.slider("values",1,e[1]),f.text(e[0]+" - "+e[1]),c.slider("refresh")}}),e.removeClass("tribe-reset-on")}}),a(document).ready(function(){function g(a){(a||"filters"===e.ajax_trigger&&b.v_width<b.mobile_break)&&(r.addClass("tribe-filters-closed").removeClass("tribe-filters-open"),tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","closed"),e.ajax_trigger="")}function h(){r.removeClass("tribe-filters-closed").removeClass("tribe-ajax-success").addClass("tribe-filters-open"),tribe_storage&&tribe_storage.setItem("tribe_events_filters_wrapper","open")}function i(){r.is(".tribe-filters-closed")?h():g(!0)}function j(){o.find(".tribe-events-filter-autocomplete").each(function(){var b=a(this);b.find(".chosen-choices .search-choice-close").click(),b.find("select option:selected").removeProp("selected");var c=b.find("select").data("placeholder"),d=b.find(".chosen-choices"),e=b.find(".search-field");e.find("input").val(c).css({width:d.innerWidth()-(e.outerWidth()-e.innerWidth())})})}function k(){b.v_width<b.mobile_break&&g(!0)}function l(){"past"===e.view||"list"===e.view||"photo"===e.view||"map"===e.view?(e.paged=1,("past"===e.view||"list"===e.view)&&e.filter_cats&&(b.cur_url=a("#tribe-events-header").attr("data-baseurl"))):"month"===e.view?(e.date=a("#tribe-events-header").attr("data-date"),e.filter_cats?b.cur_url=a("#tribe-events-header").attr("data-baseurl"):b.cur_url=d.url_path(document.URL)):("week"===e.view||"day"===e.view)&&(e.date=a("#tribe-events-header").attr("data-date"))}function m(){d.disable_inputs("#tribe_events_filters_form","input, select"),e.popping=!1,l(),"map"===e.view?f.pushstate?d.pre_ajax(function(){a(c).trigger("tribe_ev_runAjax"),e.ajax_trigger="filters"}):d.pre_ajax(function(){a(c).trigger("tribe_ev_reloadOldBrowser")}):d.pre_ajax(function(){a(c).trigger("tribe_ev_runAjax"),e.ajax_trigger="filters"})}a(".tribe_events_filter_item").filter(":last").addClass("tribe_last_child");var n=a(".tribe-events-filter-autocomplete .chosen-dropdown").attr("data-no-results-text");a(".tribe-events-filter-autocomplete .chosen-dropdown").chosen({no_results_text:n,width:"100%",display_selected_options:!1,search_contains:!0});var o=a("#tribe_events_filters_form"),p=a(".tribe-events-filters-horizontal"),q=a("#tribe-events"),r=a("body"),s=q.length&&q.tribe_has_attr("data-hover-filters")&&1===q.data("hover-filters")?!0:!1;if(a("#tribe_events_filter_item_eventcategory").length&&e.category&&(e.filter_cats=!0),tribe_storage){var t=tribe_storage.getItem("tribe_events_filters_wrapper");null==t&&r.is(".tribe-filters-closed")&&(t="closed"),t&&"closed"==t?g(!0):t&&"open"==t&&h(),a(".tribe_events_filter_item").each(function(){var b=a(this),c=b.attr("id"),d=tribe_storage.getItem(c);d&&"closed"==d&&b.addClass("closed")})}a("#tribe_events_filters_wrapper").on("click","#tribe_events_filters_reset",function(b){b.preventDefault(),r.addClass("tribe-reset-on"),o.tribe_clear_form(),o.find(".ui-slider").length&&a("#tribe_events_filters_form .ui-slider").each(function(){var b=a(this).attr("id"),c=a("#"+b),d=c.prev(),e=d.prev(),f=c.slider("option");c.slider("values",0,f.min),c.slider("values",1,f.max),e.text(f.min+" - "+f.max),d.val("")}),p.length&&a(".tribe_events_filter_item").addClass("closed"),j(),o.submit(),r.removeClass("tribe-reset-on")}).on("click","#tribe_events_filters_toggle",function(a){a.preventDefault(),i()}),r.on("click",function(){p.length&&!s&&a(".tribe_events_filter_item").addClass("closed")}).on("click",".tribe-events-filter-group",function(a){p.length&&!s&&a.stopPropagation()}),s&&o.on("mouseover",".tribe_events_filter_item",function(){p.length&&a(this).removeClass("closed")}).on("mouseout",".tribe_events_filter_item",function(){p.length&&a(".tribe_events_filter_item").addClass("closed")}),o.on("click","h3",function(b){if(!p.length||!s){var c=a(this),d=c.parent(),e=d.attr("id");p.length&&(b.stopPropagation(),a(".tribe_events_filter_item").not(d).addClass("closed")),d.hasClass("closed")?(d.removeClass("closed"),tribe_storage&&tribe_storage.setItem(e,"open")):(d.addClass("closed"),tribe_storage&&tribe_storage.setItem(e,"closed"))}}),k(),a(c).on("tribe_ev_ajaxSuccess",function(){g(!1)}).on("tribe_ev_resizeComplete",k),o.on("submit",function(b){"change_view"!==tribe_events_bar_action&&(b.preventDefault(),e.popping=!1,l(),d.pre_ajax(function(){a(c).trigger("tribe_ev_runAjax"),e.ajax_trigger="filters"}))}),f.live_ajax()&&f.pushstate&&(o.find('input[type="submit"]').remove(),a("#tribe_events_filter_item_eventcategory").length&&e.category&&a("#tribe_events_filter_item_eventcategory input, #tribe_events_filter_item_eventcategory select").on("change",function(){d.setup_ajax_timer(function(){m()})}),o.on("slidechange",".ui-slider",function(){d.setup_ajax_timer(function(){m()})}).on("change","input, select",function(){e.filter_cats&&"tribe_events_filter_item_eventcategory"===a(this).parents(".tribe_events_filter_item").attr("id")||d.setup_ajax_timer(function(){m()})})),a(c).on("tribe_ev_collectParams",function(){var a=d.serialize("#tribe_events_filters_form","input, select");a.length?(e.filters=!0,e.params=e.params+"&"+a,"map"!==e.view&&(e.url_params.length?e.url_params=e.url_params+"&"+a:e.url_params=a)):e.filters=!1}),a(c).on("tribe_ev_postCollectBarParams",function(){e.filter_cats&&a("#tribe_events_filter_item_eventcategory option:selected, #tribe_events_filter_item_eventcategory input:checked").remove();var b=d.serialize("#tribe_events_filters_form","input, select");e.url_params.length&&b.length?e.url_params=e.url_params+"&"+b:b.length&&(e.url_params=b)}),a("#tribe_events_filter_item_eventcategory").length&&e.category&&(r.addClass("tribe-reset-on"),a('#tribe_events_filter_item_eventcategory option[data-slug="'+e.category+'"]').attr("selected",!0),a('#tribe_events_filter_item_eventcategory input[data-slug="'+e.category+'"]').attr("checked","checked"),r.removeClass("tribe-reset-on"))})}(jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_debug);